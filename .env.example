# Land Registry Application Configuration
# Copy this file to .env and customize the values as needed

# Application Settings
LAND_REGISTRY_APP_NAME="Land Registry Viewer"
LAND_REGISTRY_DEBUG=false
LAND_REGISTRY_HOST=0.0.0.0
LAND_REGISTRY_PORT=8000

# =============================================================================
# AECS4U Storage Configuration (unified storage via aecs4u-storage package)
# =============================================================================
# Provider options: local, s3, gcs, azure
STORAGE_PROVIDER=s3

# AWS S3 Configuration
STORAGE_S3_BUCKET=apps-aecs4u
STORAGE_S3_REGION=eu-west-3
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Storage path organization
STORAGE_PATH_PREFIX=land-registry
STORAGE_ORGANIZE_BY_DATE=true
STORAGE_PRESIGNED_URL_EXPIRY=3600
STORAGE_MAX_FILE_SIZE=104857600

# Allowed file extensions for uploads (comma-separated)
STORAGE_ALLOWED_EXTENSIONS_STR=gpkg,geojson,shp,qpkg,json,csv,xlsx,pdf,png,jpg,jpeg

# Local storage fallback (for development)
STORAGE_LOCAL_PATH=./data/uploads

# Legacy S3 Settings (backward compatibility - prefer STORAGE_* vars above)
# S3_BUCKET_NAME=apps-aecs4u
# S3_REGION=eu-west-3

# Database Settings (SQLite for local development)
DB_SQLITE_PATH=data/land-registry.sqlite
DB_CACHE_EXPIRY_HOURS=24
DB_USE_SQLITE=true

# =============================================================================
# Neon PostgreSQL Database (for persistent app data)
# =============================================================================
# Get your connection string from https://console.neon.tech
# Format: postgresql://user:password@ep-xxx.region.aws.neon.tech/database?sslmode=require
DATABASE_URL=

# =============================================================================
# Google Cloud Storage Settings (for aecs4u-storage bucket)
# =============================================================================
# Used for user uploads, exports, and permanent app data storage
GCS_BUCKET_NAME=aecs4u-storage
GCS_APP_DATA_PREFIX=land-registry/app-data
GCS_USER_DATA_PREFIX=land-registry/user-data
GCS_UPLOADS_PREFIX=land-registry/uploads
GCS_EXPORTS_PREFIX=land-registry/exports
# Enable GCS storage (auto-enabled in production)
GCS_USE_GCS=false
# Signed URL expiration time in seconds
GCS_SIGNED_URL_EXPIRATION=3600

# Map Controls Settings
MAP_CONTROLS_ENABLE_MINIMAP=true
MAP_CONTROLS_ENABLE_MOUSE_POSITION=true
MAP_CONTROLS_ENABLE_GEOCODER=true
MAP_CONTROLS_ENABLE_DRAW_TOOLS=true
MAP_CONTROLS_ENABLE_MEASURE_TOOLS=true
MAP_CONTROLS_ENABLE_MARKER_CLUSTER=true
MAP_CONTROLS_ENABLE_SEARCH=true
MAP_CONTROLS_ENABLE_TAG_FILTER=true

# Panel Server Settings
# Panel server hosts interactive data visualization dashboards
PANEL_PANEL_HOST=127.0.0.1
PANEL_PANEL_PORT=5006
PANEL_PANEL_THREADED=true
PANEL_PANEL_SHOW=false

# Panel Server Health Checks
# Controls startup validation and retry behavior
PANEL_PANEL_STARTUP_TIMEOUT=10
PANEL_PANEL_STARTUP_RETRY_DELAY=0.5
PANEL_PANEL_HEALTH_CHECK_TIMEOUT=5.0

# Panel Application Routes
# NOTE: Currently all routes point to /dashboard
# Future work: Create separate Panel apps for each table type
PANEL_PANEL_DASHBOARD_ROUTE=/dashboard
PANEL_PANEL_MAP_TABLE_ROUTE=/dashboard
PANEL_PANEL_ADJACENCY_TABLE_ROUTE=/dashboard
PANEL_PANEL_MAPPING_TABLE_ROUTE=/dashboard

# Cadastral Data Settings
# Controls how cadastral data is loaded (local files vs S3)
CADASTRAL_USE_LOCAL_FILES=false
CADASTRAL_LOCAL_CADASTRAL_DATA_PATH=data/catasto/ITALIA

# SpatiaLite Settings (optional local geodata source)
SPATIALITE_DB_PATH=data/spatialite/land_registry.sqlite
SPATIALITE_TABLE=parcels
SPATIALITE_GEOMETRY_COLUMN=geom
SPATIALITE_SRID=4326
SPATIALITE_DEFAULT_LIMIT=1000
# SPATIALITE_EXTENSION_PATH=/usr/lib/x86_64-linux-gnu/mod_spatialite.so

# Authentication Settings (Clerk)
# Required for user authentication features
CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
CLERK_DOMAIN=

# Environment
ENVIRONMENT=development
